{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "dashboardName": {
            "defaultValue": "[concat('allydashboard',toLower(uniqueString(resourceGroup().id)))]",
            "type": "String"
        },
        "appInsightsName": {
            "defaultValue": "[concat('allyinsights',toLower(uniqueString(resourceGroup().id)))]",
            "type": "String"
        },
        "webApiFunctionAppName": {
            "defaultValue": "[concat('web-api-allyfuncapp',toLower(uniqueString(resourceGroup().id)))]",
            "type": "String"
        },
        "webWorkersFunctionAppName": {
            "defaultValue": "[concat('web-workers-allyfuncapp',toLower(uniqueString(resourceGroup().id)))]",
            "type": "String"
        },
        "batchAccountName": {
            "defaultValue": "[concat('allybatch',toLower(uniqueString(resourceGroup().id)))]",
            "type": "String"
        },
        "location": {
            "type": "string",
            "defaultValue": "[resourceGroup().location]",
            "metadata": {
                "description": "The location in which the Azure Storage resources should be deployed."
            }
        }
    },
    "variables": {
        "appInsightsResourceId": "[resourceId('microsoft.insights/components/', parameters('appInsightsName'))]",
        "batchAccountResourceId": "[resourceId('Microsoft.Batch/batchAccounts', parameters('batchAccountName'))]",
        "webApiFunctionAppResourceId": "[resourceId('Microsoft.Web/sites/', parameters('webApiFunctionAppName'))]",
        "webWorkersFunctionAppResourceId": "[resourceId('Microsoft.Web/sites/', parameters('webApiFunctionAppName'))]"
    },
    "resources": [
        {
            "type": "Microsoft.Portal/dashboards",
            "apiVersion": "2019-01-01-preview",
            "name": "[parameters('dashboardName')]",
            "location": "[parameters('location')]",
            "tags": {
                "hidden-title": "[parameters('dashboardName')]"
            },
            "properties": {
                "lenses": {
                    "0": {
                        "order": 0,
                        "parts": {
                            "0": {
                                "position": {
                                    "x": 0,
                                    "y": 0,
                                    "colSpan": 3,
                                    "rowSpan": 3
                                },
                                "metadata": {
                                    "inputs": [],
                                    "type": "Extension/HubsExtension/PartType/MarkdownPart",
                                    "settings": {
                                        "content": {
                                            "settings": {
                                                "content": "Use this <a href='https://microsoft.sharepoint.com/teams/DD_VSCS/CandC/Keros/_layouts/OneNote.aspx?id=%2Fteams%2FDD_VSCS%2FCandC%2FKeros%2FDocuments%2FKeros%20Engineering&wd=target%28AI%20Service%20Live%20Site%20Support.one%7C700F8953-D0B7-49A5-BA93-54DA25211390%2F%29' target='_blank'>troubleshooting guide</a> to solve some of the most common issues you may face during service outage.",
                                                "title": "Accessibility Insights Service",
                                                "subtitle": "Monitoring Dashboard",
                                                "markdownSource": 1
                                            }
                                        }
                                    }
                                }
                            },
                            "1": {
                                "position": {
                                    "x": 3,
                                    "y": 0,
                                    "colSpan": 6,
                                    "rowSpan": 3
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "availabilityResults/availabilityPercentage",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components",
                                                            "metricVisualization": {
                                                                "resourceDisplayName": "[parameters('appInsightsName')]",
                                                                "color": "#7FBA00"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Availability",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "axisVisualization": {
                                                            "y": {
                                                                "isVisible": true,
                                                                "min": 0,
                                                                "max": 100
                                                            },
                                                            "x": {
                                                                "isVisible": true
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    },
                                                    "openBladeOnClick": {
                                                        "openBlade": true,
                                                        "destinationBlade": {
                                                            "bladeName": "ResourceMenuBlade",
                                                            "parameters": {
                                                                "id": "[variables('appInsightsResourceId')]",
                                                                "menuid": "availability"
                                                            },
                                                            "extensionName": "HubsExtension",
                                                            "metadata": {},
                                                            "options": {
                                                                "parameters": {
                                                                    "id": "[variables('appInsightsResourceId')]",
                                                                    "menuid": "availability"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {},
                                    "asset": {
                                        "idInputName": "ComponentId",
                                        "type": "ApplicationInsights"
                                    }
                                }
                            },
                            "2": {
                                "position": {
                                    "x": 9,
                                    "y": 0,
                                    "colSpan": 6,
                                    "rowSpan": 3
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "ComponentId",
                                            "value": {
                                                "SubscriptionId": "[subscription().subscriptionId]",
                                                "ResourceGroup": "[resourceGroup().name]",
                                                "Name": "[parameters('appInsightsName')]",
                                                "ResourceId": "[variables('appInsightsResourceId')]"
                                            }
                                        },
                                        {
                                            "name": "Query",
                                            "value": "requests\n| summarize failedRequests = countif(substring(resultCode, 0, 1) == '5'), totalRequests=count()\n| extend reliability= strcat(toint((totalRequests - failedRequests)/todecimal(totalRequests) * 100 * 1000) / todecimal(1000), \"%\")\n"
                                        },
                                        {
                                            "name": "Version",
                                            "value": "1.0"
                                        },
                                        {
                                            "name": "PartId",
                                            "value": "962e0e73-b670-4d51-b1fc-ddda5bd7ccb2"
                                        },
                                        {
                                            "name": "PartTitle",
                                            "value": "Reliability"
                                        },
                                        {
                                            "name": "PartSubTitle",
                                            "value": "Service reliability"
                                        },
                                        {
                                            "name": "resourceTypeMode",
                                            "value": "components"
                                        },
                                        {
                                            "name": "ControlType",
                                            "value": "AnalyticsGrid"
                                        },
                                        {
                                            "name": "Dimensions",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "TimeRange",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "DashboardId",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "SpecificChart",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
                                    "settings": {},
                                    "asset": {
                                        "idInputName": "ComponentId",
                                        "type": "ApplicationInsights"
                                    }
                                }
                            },
                            "3": {
                                "position": {
                                    "x": 15,
                                    "y": 0,
                                    "colSpan": 6,
                                    "rowSpan": 3
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "ComponentId",
                                            "value": {
                                                "SubscriptionId": "[subscription().subscriptionId]",
                                                "ResourceGroup": "[resourceGroup().name]",
                                                "Name": "[parameters('appInsightsName')]",
                                                "ResourceId": "[variables('appInsightsResourceId')]"
                                            }
                                        },
                                        {
                                            "name": "Query",
                                            "value": "let scanExecutionTargetTime = 30;\ncustomEvents\n| where name == \"ScanTaskCompleted\"\n| extend scanExecutionTime = todouble(customMeasurements.scanExecutionTime)\n| summarize RequestsMetTarget=countif(scanExecutionTime <= scanExecutionTargetTime) , TotalRequests=count()\n| extend Performance=strcat(round(RequestsMetTarget/todecimal(TotalRequests) * 100, 2), \"%\") \n"
                                        },
                                        {
                                            "name": "TimeRange",
                                            "value": "P1D"
                                        },
                                        {
                                            "name": "Version",
                                            "value": "1.0"
                                        },
                                        {
                                            "name": "PartId",
                                            "value": "6ae55d31-027a-48f7-9256-d1354a15a2a7"
                                        },
                                        {
                                            "name": "PartTitle",
                                            "value": "Performance"
                                        },
                                        {
                                            "name": "PartSubTitle",
                                            "value": "Scan execution performance"
                                        },
                                        {
                                            "name": "resourceTypeMode",
                                            "value": "components"
                                        },
                                        {
                                            "name": "ControlType",
                                            "value": "AnalyticsGrid"
                                        },
                                        {
                                            "name": "Dimensions",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "DashboardId",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "SpecificChart",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
                                    "settings": {},
                                    "asset": {
                                        "idInputName": "ComponentId",
                                        "type": "ApplicationInsights"
                                    }
                                }
                            },
                            "4": {
                                "position": {
                                    "x": 0,
                                    "y": 4,
                                    "colSpan": 12,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/pendingScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "pendingScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/acceptedScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "acceptedScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/queuedScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "queuedScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/runningScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "runningScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/completedScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "completedScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/failedScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "failedScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanRequestNotificationsStarted",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanRequestNotificationsStarted"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanRequestNotificationsCompleted",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanRequestNotificationsCompleted"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanRequestNotificationsFailed",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanRequestNotificationsFailed"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Scan Request Count by pipeline stages",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "5": {
                                "position": {
                                    "x": 12,
                                    "y": 4,
                                    "colSpan": 8,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/totalScanRequests",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "totalScanRequests(Sum)"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/pendingScanRequests",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "pendingScanRequests(Sum)",
                                                                "color": "#2dc004"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/rejectedScanRequests",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "rejectedScanRequests(Sum)",
                                                                "color": "#f71a21"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Scan Requests Accepted vs Rejected",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/totalScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "totalScanRequests"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/pendingScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "pendingScanRequests",
                                                                "color": "#2dc004"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/rejectedScanRequests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "rejectedScanRequests",
                                                                "color": "#f71a21"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Received Scan Request States",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    }
                                }
                            },
                            "6": {
                                "position": {
                                    "x": 0,
                                    "y": 9,
                                    "colSpan": 5,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webWorkersFunctionAppResourceId')]"
                                                            },
                                                            "name": "AppConnections",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Connections",
                                                                "resourceDisplayName": "[parameters('webWorkersFunctionAppName')]"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Connection Count for web-workers app service",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "7": {
                                "position": {
                                    "x": 5,
                                    "y": 9,
                                    "colSpan": 5,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webWorkersFunctionAppResourceId')]"
                                                            },
                                                            "name": "FunctionExecutionCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Function Execution Count",
                                                                "resourceDisplayName": "[parameters('webWorkersFunctionAppName')]"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Function Execution Count for web-workers app service",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "8": {
                                "position": {
                                    "x": 10,
                                    "y": 9,
                                    "colSpan": 5,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "AppConnections",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Connections",
                                                                "resourceDisplayName": "[parameters('webApiFunctionAppName')]"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Connection Count for web-api app service",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "9": {
                                "position": {
                                    "x": 15,
                                    "y": 9,
                                    "colSpan": 5,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "FunctionExecutionCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Function Execution Count",
                                                                "resourceDisplayName": "[parameters('webApiFunctionAppName')]"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Function Execution Count for web-api app service",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "10": {
                                "position": {
                                    "x": 0,
                                    "y": 14,
                                    "colSpan": 10,
                                    "rowSpan": 5
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "ComponentId",
                                            "value": {
                                                "SubscriptionId": "[subscription().subscriptionId]",
                                                "ResourceGroup": "[resourceGroup().name]",
                                                "Name": "[parameters('appInsightsName')]",
                                                "ResourceId": "[variables('appInsightsResourceId')]"
                                            }
                                        },
                                        {
                                            "name": "Query",
                                            "value": "let numberOfBuckets = 40;\nlet interval = toscalar(requests\n| summarize interval = (max(timestamp)-min(timestamp)) / numberOfBuckets\n| project floor(interval, 1m));\nlet dataset=requests\n| where client_Type != \"Browser\"\n| extend [\"Operation Name\"]=operation_Name;\ndataset\n| summarize [\"Avg response time (msec)\"]=avg(duration) by [\"Operation Name\"], bin(timestamp, interval)\n| union(dataset\n| summarize [\"Avg response time (msec)\"]=avg(duration) by bin(timestamp, interval)\n| extend [\"Operation Name\"]=\"Total\")\n| render timechart\n"
                                        },
                                        {
                                            "name": "TimeRange",
                                            "value": "P1D"
                                        },
                                        {
                                            "name": "Dimensions",
                                            "value": {
                                                "xAxis": {
                                                    "name": "timestamp",
                                                    "type": "datetime"
                                                },
                                                "yAxis": [
                                                    {
                                                        "name": "Avg response time (msec)",
                                                        "type": "real"
                                                    }
                                                ],
                                                "splitBy": [
                                                    {
                                                        "name": "Operation Name",
                                                        "type": "string"
                                                    }
                                                ],
                                                "aggregation": "Sum"
                                            }
                                        },
                                        {
                                            "name": "Version",
                                            "value": "1.0"
                                        },
                                        {
                                            "name": "PartId",
                                            "value": "7e72f3d7-a532-47fa-911b-3df9f0906f70"
                                        },
                                        {
                                            "name": "PartTitle",
                                            "value": "Analytics"
                                        },
                                        {
                                            "name": "PartSubTitle",
                                            "value": "[parameters('appInsightsName')]"
                                        },
                                        {
                                            "name": "resourceTypeMode",
                                            "value": "components"
                                        },
                                        {
                                            "name": "ControlType",
                                            "value": "AnalyticsChart"
                                        },
                                        {
                                            "name": "SpecificChart",
                                            "value": "Line"
                                        },
                                        {
                                            "name": "DashboardId",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
                                    "settings": {
                                        "content": {
                                            "PartTitle": "API Response Time (msec)",
                                            "PartSubTitle": "by app functions",
                                            "Query": "let numberOfBuckets = 100;\nlet interval = toscalar(requests\n| summarize interval = (max(timestamp)-min(timestamp)) / numberOfBuckets\n| project floor(interval, 1s));\nlet dataset=requests\n| where client_Type != \"Browser\"\n| extend [\"Operation Name\"]=operation_Name;\ndataset\n| summarize [\"Avg response time (msec)\"]=avg(duration) by [\"Operation Name\"], bin(timestamp, interval)\n| render timechart\n"
                                        }
                                    },
                                    "asset": {
                                        "idInputName": "ComponentId",
                                        "type": "ApplicationInsights"
                                    }
                                }
                            },
                            "11": {
                                "position": {
                                    "x": 10,
                                    "y": 14,
                                    "colSpan": 10,
                                    "rowSpan": 5
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "ComponentId",
                                            "value": {
                                                "SubscriptionId": "[subscription().subscriptionId]",
                                                "ResourceGroup": "[resourceGroup().name]",
                                                "Name": "[parameters('appInsightsName')]",
                                                "ResourceId": "[variables('appInsightsResourceId')]"
                                            }
                                        },
                                        {
                                            "name": "Query",
                                            "value": "let numberOfBuckets = 50;\nlet interval = toscalar(requests\n| summarize interval = (max(timestamp)-min(timestamp)) / numberOfBuckets\n| project floor(interval, 1m));\nlet dataset=requests\n| where client_Type != \"Browser\"\n| extend [\"Operation Name\"]=operation_Name;\ndataset\n| summarize Count=sum(itemCount) by [\"Operation Name\"], bin(timestamp, interval)\n| union(dataset\n| summarize Count=sum(itemCount) by bin(timestamp, interval)\n| extend [\"Operation Name\"]=\"Total\")\n| render timechart\n"
                                        },
                                        {
                                            "name": "TimeRange",
                                            "value": "PT4H"
                                        },
                                        {
                                            "name": "Dimensions",
                                            "value": {
                                                "xAxis": {
                                                    "name": "timestamp",
                                                    "type": "datetime"
                                                },
                                                "yAxis": [
                                                    {
                                                        "name": "Count",
                                                        "type": "long"
                                                    }
                                                ],
                                                "splitBy": [
                                                    {
                                                        "name": "Operation Name",
                                                        "type": "string"
                                                    }
                                                ],
                                                "aggregation": "Sum"
                                            }
                                        },
                                        {
                                            "name": "Version",
                                            "value": "1.0"
                                        },
                                        {
                                            "name": "PartId",
                                            "value": "849a961b-1971-400d-a230-afbfd9135b05"
                                        },
                                        {
                                            "name": "PartTitle",
                                            "value": "Analytics"
                                        },
                                        {
                                            "name": "PartSubTitle",
                                            "value": "[parameters('appInsightsName')]"
                                        },
                                        {
                                            "name": "resourceTypeMode",
                                            "value": "components"
                                        },
                                        {
                                            "name": "ControlType",
                                            "value": "AnalyticsChart"
                                        },
                                        {
                                            "name": "SpecificChart",
                                            "value": "Line"
                                        },
                                        {
                                            "name": "DashboardId",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
                                    "settings": {
                                        "content": {
                                            "PartTitle": "API Request Count",
                                            "PartSubTitle": "by app functions",
                                            "Query": "let numberOfBuckets = 100;\nlet interval = toscalar(requests\n| summarize interval = (max(timestamp)-min(timestamp)) / numberOfBuckets\n| project floor(interval, 1s));\nlet dataset=requests\n| where client_Type != \"Browser\"\n| extend [\"Operation Name\"]=operation_Name;\ndataset\n| summarize Count=sum(itemCount) by [\"Operation Name\"], bin(timestamp, interval)\n| render timechart\n"
                                        }
                                    },
                                    "asset": {
                                        "idInputName": "ComponentId",
                                        "type": "ApplicationInsights"
                                    }
                                }
                            },
                            "12": {
                                "position": {
                                    "x": 0,
                                    "y": 19,
                                    "colSpan": 10,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http2xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 2xx",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http401",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 401",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http403",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 403",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http5xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http Server Errors",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http4xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 4xx",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http3xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 3xx",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Requests",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Requests",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http101",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 101",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        }
                                                    ],
                                                    "title": "API Response Codes count",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 5,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http2xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 2xx",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http401",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 401",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http403",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 403",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http5xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http Server Errors",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http4xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 4xx",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http3xx",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 3xx",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('webApiFunctionAppResourceId')]"
                                                            },
                                                            "name": "Http101",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.web/sites",
                                                            "metricVisualization": {
                                                                "displayName": "Http 101",
                                                                "resourceDisplayName": "web-api-azure-function"
                                                            }
                                                        }
                                                    ],
                                                    "title": "API Response Status Code Count",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    }
                                }
                            },
                            "13": {
                                "position": {
                                    "x": 10,
                                    "y": 19,
                                    "colSpan": 10,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "requests/failed",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "Failed requests by function name"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Failed requests by function name",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    },
                                                    "grouping": {
                                                        "dimension": "request/name",
                                                        "sort": 2,
                                                        "top": 10
                                                    }
                                                }
                                            },
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "requests/failed",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "Failed requests"
                                                            }
                                                        }
                                                    ],
                                                    "title": "API Failed Request Count",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    },
                                                    "grouping": {
                                                        "dimension": "request/name",
                                                        "sort": 2,
                                                        "top": 10
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "14": {
                                "position": {
                                    "x": 0,
                                    "y": 24,
                                    "colSpan": 10,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/count",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "Events"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Scans Requests Succeeded vs Completed",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    },
                                                    "filterCollection": {
                                                        "filters": [
                                                            {
                                                                "key": "customEvent/name",
                                                                "operator": 0,
                                                                "values": ["ScanTaskStarted", "ScanTaskCompleted", "ScanTaskFailed"]
                                                            }
                                                        ]
                                                    },
                                                    "grouping": {
                                                        "dimension": "customEvent/name",
                                                        "sort": 2,
                                                        "top": 3
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "startedScanTasks",
                                                            "aggregationType": 4,
                                                            "namespace": "azure.applicationinsights",
                                                            "metricVisualization": {
                                                                "displayName": "startedScanTasks"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "completedScanTasks",
                                                            "aggregationType": 4,
                                                            "namespace": "azure.applicationinsights",
                                                            "metricVisualization": {
                                                                "displayName": "completedScanTasks"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "failedScanTasks",
                                                            "aggregationType": 4,
                                                            "namespace": "azure.applicationinsights",
                                                            "metricVisualization": {
                                                                "displayName": "failedScanTasks"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "startedScanNotificationTasks",
                                                            "aggregationType": 4,
                                                            "namespace": "azure.applicationinsights",
                                                            "metricVisualization": {
                                                                "displayName": "startedScanNotificationTasks"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "completedScanNotificationTasks",
                                                            "aggregationType": 4,
                                                            "namespace": "azure.applicationinsights",
                                                            "metricVisualization": {
                                                                "displayName": "completedScanNotificationTasks"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "failedScanNotificationTasks",
                                                            "aggregationType": 4,
                                                            "namespace": "azure.applicationinsights",
                                                            "metricVisualization": {
                                                                "displayName": "failedScanNotificationTasks"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Batch Pipeline Task States",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    }
                                }
                            },
                            "15": {
                                "position": {
                                    "x": 10,
                                    "y": 24,
                                    "colSpan": 10,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanExecutionTime",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanExecutionTime",
                                                                "color": "#917edb"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanWaitTime",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanWaitTime",
                                                                "color": "#e86e58"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanTotalTime",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanTotalTime",
                                                                "color": "#0078d4"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Scan Duration (Seconds)",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanExecutionTime",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanExecutionTime",
                                                                "color": "#917edb"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanWaitTime",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanWaitTime",
                                                                "color": "#e86e58"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/custom/scanTotalTime",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "scanTotalTime",
                                                                "color": "#0078d4"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Batch Scan Task Duration (sec)",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    }
                                }
                            },
                            "16": {
                                "position": {
                                    "x": 0,
                                    "y": 28,
                                    "colSpan": 10,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "StartingNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Starting Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "IdleNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Idle Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "RunningNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Running Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "StartTaskFailedNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Start Task Failed Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "RebootingNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Rebooting Node Count"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Nodes State",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "StartingNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Starting Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "IdleNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Idle Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "RunningNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Running Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "StartTaskFailedNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Start Task Failed Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "RebootingNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Rebooting Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "UnusableNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Unusable Node Count"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TotalNodeCount",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Dedicated Node Count"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Batch Account Node Count",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    }
                                }
                            },
                            "17": {
                                "position": {
                                    "x": 10,
                                    "y": 28,
                                    "colSpan": 10,
                                    "rowSpan": 4
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TaskStartEvent",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Task Start Events",
                                                                "resourceDisplayName": "[parameters('batchAccountName')]"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TaskCompleteEvent",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Task Complete Events",
                                                                "resourceDisplayName": "[parameters('batchAccountName')]"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TaskFailEvent",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Task Fail Events",
                                                                "resourceDisplayName": "[parameters('batchAccountName')]"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Task States",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TaskStartEvent",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Task Start Events",
                                                                "resourceDisplayName": "[parameters('batchAccountName')]"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TaskCompleteEvent",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Task Complete Events",
                                                                "resourceDisplayName": "[parameters('batchAccountName')]"
                                                            }
                                                        },
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('batchAccountResourceId')]"
                                                            },
                                                            "name": "TaskFailEvent",
                                                            "aggregationType": 4,
                                                            "namespace": "microsoft.batch/batchaccounts",
                                                            "metricVisualization": {
                                                                "displayName": "Task Fail Events",
                                                                "resourceDisplayName": "[parameters('batchAccountName')]"
                                                            }
                                                        }
                                                    ],
                                                    "title": "Batch Account Task States",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    }
                                }
                            },
                            "18": {
                                "position": {
                                    "x": 0,
                                    "y": 33,
                                    "colSpan": 10,
                                    "rowSpan": 5
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "ComponentId",
                                            "value": {
                                                "SubscriptionId": "[subscription().subscriptionId]",
                                                "ResourceGroup": "[resourceGroup().name]",
                                                "Name": "[parameters('appInsightsName')]",
                                                "ResourceId": "[variables('appInsightsResourceId')]"
                                            }
                                        },
                                        {
                                            "name": "Query",
                                            "value": "let functionalTestEvents = customEvents\r\n| where name == \"FunctionalTest\";\r\nlet lastCompletedRun = functionalTestEvents\r\n| where customDimensions.testContainer == \"FinalizerTestGroup\"\r\n| top 1 by timestamp desc nulls last\r\n| project runId = customDimensions.runId, releaseId = tostring(customDimensions.releaseId), key=1;\r\nlet lastStartedRun = functionalTestEvents\r\n| top 1 by timestamp desc nulls last\r\n| project runId = customDimensions.runId, releaseId = tostring(customDimensions.releaseId), key=1;\r\nlet runId = toscalar(lastCompletedRun\r\n| join kind=fullouter lastStartedRun on key\r\n| project value = tostring(iff(isnotnull(releaseId) and releaseId == releaseId1, runId, runId1)));\r\nlet relevantTestEvents = functionalTestEvents\r\n| where customDimensions.runId == runId;\r\nlet completeTestRuns = relevantTestEvents\r\n| where customDimensions.logSource == \"TestRun\"\r\n| project testContainerName = tostring(customDimensions.testContainer), testName = tostring(customDimensions.testName), result = tostring(customDimensions.result), releaseId = customDimensions.releaseId, timestamp;\r\nlet completeTestContainers = relevantTestEvents\r\n| where customDimensions.logSource == \"TestContainer\"\r\n| project testContainerName = tostring(customDimensions.testContainer);\r\nlet testContainerNames = functionalTestEvents\r\n| where customDimensions.source == \"BeginTestSuite\"\r\n| top 1 by timestamp\r\n| project testContainerName = split(tostring(customDimensions.functionalTestGroups), \",\")\r\n| mv-expand testContainerName\r\n| project testContainerName = tostring(testContainerName);\r\ntestContainerNames\r\n| project testContainerName, testName = \"Additional tests\", result = \"incomplete\"\r\n| join kind=leftanti completeTestContainers on testContainerName\r\n| union completeTestRuns\r\n| where testContainerName != \"FinalizerTestGroup\"\r\n| sort by testContainerName\r\n"
                                        },
                                        {
                                            "name": "TimeRange",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "Version",
                                            "value": "1.0"
                                        },
                                        {
                                            "name": "PartId",
                                            "value": "6fb6698a-49fe-4cca-b565-8fc6b6367b01"
                                        },
                                        {
                                            "name": "PartTitle",
                                            "value": "E2E Test Results"
                                        },
                                        {
                                            "name": "PartSubTitle",
                                            "value": "Results for most recent test run"
                                        },
                                        {
                                            "name": "resourceTypeMode",
                                            "value": "components"
                                        },
                                        {
                                            "name": "ControlType",
                                            "value": "AnalyticsGrid"
                                        },
                                        {
                                            "name": "Dimensions",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "DashboardId",
                                            "isOptional": true
                                        },
                                        {
                                            "name": "SpecificChart",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
                                    "settings": {
                                        "content": {
                                            "PartTitle": "E2E Test Results",
                                            "PartSubTitle": "Results for most recent test runs",
                                            "GridColumnsWidth": {
                                                "testContainerName": "194px",
                                                "testName": "254px",
                                                "result": "90px"
                                            }
                                        }
                                    },
                                    "asset": {
                                        "idInputName": "ComponentId",
                                        "type": "ApplicationInsights"
                                    }
                                }
                            },
                            "19": {
                                "position": {
                                    "x": 10,
                                    "y": 33,
                                    "colSpan": 10,
                                    "rowSpan": 5
                                },
                                "metadata": {
                                    "inputs": [
                                        {
                                            "name": "options",
                                            "value": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/count",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "Events"
                                                            }
                                                        }
                                                    ],
                                                    "title": "E2E Test Results Over Time",
                                                    "titleKind": 1,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": false
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        }
                                                    },
                                                    "filterCollection": {
                                                        "filters": [
                                                            {
                                                                "key": "customEvent/name",
                                                                "operator": 0,
                                                                "values": ["FunctionalTest"]
                                                            },
                                                            {
                                                                "key": "customDimensions/logSource",
                                                                "operator": 0,
                                                                "values": ["TestRun"]
                                                            }
                                                        ]
                                                    },
                                                    "grouping": {
                                                        "dimension": "customDimensions/result",
                                                        "sort": 2,
                                                        "top": 10
                                                    }
                                                },
                                                "version": 2
                                            }
                                        },
                                        {
                                            "name": "sharedTimeRange",
                                            "isOptional": true
                                        }
                                    ],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
                                            "options": {
                                                "chart": {
                                                    "metrics": [
                                                        {
                                                            "resourceMetadata": {
                                                                "id": "[variables('appInsightsResourceId')]"
                                                            },
                                                            "name": "customEvents/count",
                                                            "aggregationType": 1,
                                                            "namespace": "microsoft.insights/components/kusto",
                                                            "metricVisualization": {
                                                                "displayName": "Events"
                                                            }
                                                        }
                                                    ],
                                                    "title": "E2E Test Results Over Time",
                                                    "titleKind": 2,
                                                    "visualization": {
                                                        "chartType": 2,
                                                        "legendVisualization": {
                                                            "isVisible": true,
                                                            "position": 2,
                                                            "hideSubtitle": true
                                                        },
                                                        "axisVisualization": {
                                                            "x": {
                                                                "isVisible": true,
                                                                "axisType": 2
                                                            },
                                                            "y": {
                                                                "isVisible": true,
                                                                "axisType": 1
                                                            }
                                                        },
                                                        "disablePinning": true
                                                    },
                                                    "grouping": {
                                                        "dimension": "customDimensions/result",
                                                        "sort": 2,
                                                        "top": 10
                                                    }
                                                },
                                                "version": 2
                                            }
                                        }
                                    },
                                    "filters": {
                                        "customEvent/name": {
                                            "model": {
                                                "operator": "equals",
                                                "values": ["FunctionalTest"]
                                            }
                                        },
                                        "customDimensions/logSource": {
                                            "model": {
                                                "operator": "equals",
                                                "values": ["TestRun"]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "metadata": {
                    "model": {
                        "timeRange": {
                            "value": {
                                "relative": {
                                    "duration": 24,
                                    "timeUnit": 1
                                }
                            },
                            "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
                        },
                        "filterLocale": {
                            "value": "en-us"
                        },
                        "filters": {
                            "value": {
                                "MsPortalFx_TimeRange": {
                                    "model": {
                                        "format": "utc",
                                        "granularity": "auto",
                                        "relative": "24h"
                                    },
                                    "displayCache": {
                                        "name": "UTC Time",
                                        "value": "Past 24 hours"
                                    },
                                    "filteredPartIds": [
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9008",
                                        "StartboardPart-AnalyticsPart-e5fee6c7-673b-458a-9fad-f6f2bc8e900a",
                                        "StartboardPart-AnalyticsPart-e5fee6c7-673b-458a-9fad-f6f2bc8e900c",
                                        "StartboardPart-AnalyticsPart-e5fee6c7-673b-458a-9fad-f6f2bc8e900e",
                                        "StartboardPart-AnalyticsPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9010",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9012",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9014",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9016",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9018",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e901a",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e901c",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e901e",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9020",
                                        "StartboardPart-AnalyticsPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9022",
                                        "StartboardPart-MonitorChartPart-e5fee6c7-673b-458a-9fad-f6f2bc8e9024"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        }
    ]
}
